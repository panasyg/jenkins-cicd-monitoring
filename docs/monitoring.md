# Моніторинг

## Опис
У цьому проекті для моніторингу використовується набір інструментів, що складається з **Prometheus**, **Grafana** та **cAdvisor**. Ці інструменти дозволяють отримувати метрики та візуалізувати стан додатка, серверів та контейнерів.

## Технології

- **Prometheus**: Система моніторингу та збирання метрик, яка зберігає дані про стан системи. Prometheus забезпечує регулярне опитування метрик з різних джерел (наприклад, cAdvisor або власний додаток).
- **Grafana**: Платформа для візуалізації даних. Grafana дозволяє будувати графіки та панелі моніторингу на основі даних, отриманих від Prometheus.
- **cAdvisor**: Інструмент для моніторингу контейнерів Docker. cAdvisor збирає метрики, пов'язані з використанням ресурсів (CPU, пам'ять, мережа) для кожного контейнера.

## Архітектура

Моніторинг у цьому проекті складається з трьох основних компонентів:
1. **Prometheus**: Відповідає за збирання та зберігання метрик. Він періодично опитує cAdvisor та інші джерела метрик.
2. **Grafana**: Відображає метрики, що зібрані Prometheus, на дашбордах. Визначено кілька панелей для моніторингу контейнерів, серверів та додатків.
3. **cAdvisor**: Інструмент, який надає метрики для кожного Docker контейнера. Він збирає інформацію про використання ресурсів, що допомагає відстежувати ефективність роботи контейнерів.

## Налаштування

1. **Prometheus** налаштований на отримання метрик з cAdvisor. Для цього використовується HTTP API, яке надає cAdvisor. Дані про кожен контейнер зберігаються в Prometheus для подальшого аналізу та візуалізації.
   
2. **Grafana** підключена до Prometheus як джерело даних. На основі отриманих метрик створені панелі моніторингу для відображення важливих параметрів, таких як використання CPU, пам'яті, мережі та інші показники для кожного контейнера.

3. **cAdvisor** працює як контейнер, що збирає метрики про Docker контейнери. Ці метрики доступні через HTTP інтерфейс, що дозволяє Prometheus їх опитувати.

## Алерти

У системі налаштовані алерти для моніторингу ресурсів:
- **Високе завантаження CPU**: Алерт спрацьовує, коли використання CPU перевищує встановлений ліміт.
- **Використання пам'яті**: Алерт спрацьовує, коли контейнер або сервер використовує більше пам'яті, ніж передбачено.
Алерти не працюють, оскільки це вимагає додаткових зусиль, setup smpt/some chat webhook.

## Панелі в Grafana - імпортував готовий дешборд - https://grafana.com/grafana/dashboards/19792-cadvisor-dashboard/
http://20.84.68.230:3000/d/9AJV_mnIk/cadvisor-dashboard:

<img width="2056" alt="image" src="https://github.com/user-attachments/assets/1f1fde1d-5c52-4c79-943d-4d8fdc633ff4" />

Багато різної інформації, головне наші контейнери моніторяться:

<img width="1745" alt="image" src="https://github.com/user-attachments/assets/c21b4b5a-86ac-43e1-8ae7-d3772c9f07b7" />
<img width="1741" alt="image" src="https://github.com/user-attachments/assets/6e08ce2c-cbae-4bff-87c2-ec401e97835c" />
